<!DOCTYPE html>
<html>
<head>
    <title>Simple login</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">  </script>
    <script>
        $(document).ready(function(){
            var user,pass;
            $("#submit").click(function(){
                user=$("#user").val();
                pass=$("#password").val();
                $.post("http://localhost:3000/login",{user: user,password: pass}, function(data){
                    if(data === 'yes') {
                        sendReq();
                    }
                    else{
                        alert("HTTP-Statuscode 401 („Unauthorized“)");
                    }
                });
            });
        });
    </script>
</head>
<body>
<h1>Hello people !</h1>
<input type="TEXT" id="user" size="40"><br>
<input type="password" id="password" size="40"><br>
<input type="button" id="submit" value="Submit">
<div id="test">

</div>
<script>
    function sendReq() {
        var httpRequest = new XMLHttpRequest();

        var url = `http://localhost:3000/loginData`;

        httpRequest.open("GET", url, true);

        httpRequest.onerror = function () {// diese Funktion wird ausgefuehrt, wenn ein Fehler auftritt
            console.log("Connecting to server with " + url + " failed!\n");
        };

        httpRequest.onload = function (e) {// diese Funktion wird ausgefuehrt, wenn die Anfrage erfolgreich war
            var data = this.response;
            var obj = JSON.parse(data);

            if (this.status == 200) {
                document.getElementById("test").innerHTML = obj.username+obj.password;
            } else {     //Handhabung von nicht-200er
                console.log("HTTP-status code was: " + obj.status);
            }
        };

        httpRequest.send();
    }
</script>
</body>
</html>
